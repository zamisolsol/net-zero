# AI 기반 스마트 패키징 최적화 시스템

실시간 카메라 촬영을 통한 물체 측정 및 AI 기반 최적 포장 솔루션

## �� 주요 기능

- **�� 실시간 카메라 측정**: ArUco 마커 기반 정확한 물체 크기 측정
- **�� AI 박스 추천**: Azure OpenAI 기반 최적 박스 크기 추천
- **�� 3D 패킹 시뮬레이션**: Three.js 기반 실시간 3D 포장 시각화
- **�� 멀티 오브젝트 측정**: 최대 4개 물체 동시 측정 및 최적화
- **�� 비용 최적화**: 우체국 택배 박스 규격 기준 포장재 비용 절감
- **♻️ 공간 효율성**: 고급 패킹 알고리즘으로 85% 이상 공간 활용

## ��️ 시스템 아키텍처

```
Frontend (React/Next.js)
├── 실시간 카메라 피드
├── 3D 패킹 시각화
└── Socket.IO 통신

Backend Services
├── main.py (포트 8002) - 메인 패킹 서버
├── app.py (포트 8001) - AI 박스 추천 서버
└── Django 서버 - 데이터 관리
```

## �� 빠른 시작

### 필수 요구사항

- Python 3.8+
- Node.js 16+
- 웹캠 또는 카메라
- ArUco 마커 (출력 필요)

### 설치 및 실행

#### 1. 저장소 클론
```bash
git clone <repository-url>
cd smart-packaging-system
```

#### 2. 백엔드 서버 실행

**A. 메인 패킹 서버 (main.py)**
```bash
cd backend
pip install -r requirements.txt
python main.py
# 서버 실행: http://localhost:8002
```

**B. AI 박스 추천 서버 (app.py)**
```bash
cd backend/PackageRecommender
pip install -r requirements.txt
python app.py
# 서버 실행: http://localhost:8001
```

**C. Django 데이터 서버**
```bash
cd backend
python manage.py migrate
python manage.py runserver
# 서버 실행: http://localhost:8000
```

#### 3. 프론트엔드 실행
```bash
cd frontend
npm install
npm run dev
# 개발 서버: http://localhost:3000
```

### �� 실행 순서 체크리스트

1. ✅ **메인 패킹 서버** 실행 (`python main.py`)
2. ✅ **AI 추천 서버** 실행 (`python app.py`) 
3. ✅ **Django 서버** 실행 (`python manage.py runserver`)
4. ✅ **프론트엔드** 실행 (`npm run dev`)
5. ✅ **카메라 연결** 확인
6. ✅ **ArUco 마커** 준비

## �� 사용법

### 1. ArUco 마커 준비
- ArUco 마커를 출력하여 기준점으로 사용
- 마커가 카메라에 인식되어야 측정 가능

### 2. 물체 측정
1. 브라우저에서 `http://localhost:3000` 접속
2. 카메라 권한 허용
3. ArUco 마커를 카메라에 보여주기
4. 측정할 물체를 마커 옆에 배치
5. "분석하기" 버튼 클릭

### 3. 멀티 오브젝트 측정
- 첫 번째 물체 측정 후 "추가 촬영" 선택
- 최대 4개까지 연속 측정 가능
- 모든 물체를 종합하여 최적 박스 추천

### 4. 패킹 결과 확인
- 3D 시각화로 포장 배치 확인
- 추천 박스 정보 및 비용 확인
- 공간 효율성 및 절약 효과 확인

## ��️ 기술 스택

### Frontend
- **React 18** - UI 프레임워크
- **Next.js** - 풀스택 프레임워크
- **Three.js** - 3D 그래픽 렌더링
- **Socket.IO Client** - 실시간 통신
- **Tailwind CSS** - 스타일링

### Backend
- **Python FastAPI** - 메인 API 서버
- **Flask** - AI 추천 서비스
- **Django** - 데이터 관리
- **OpenCV** - 컴퓨터 비전
- **Socket.IO** - 실시간 통신
- **Azure OpenAI** - AI 박스 추천

### AI/ML
- **ArUco 마커 인식** - 정확한 크기 측정
- **3D 패킹 알고리즘** - 공간 최적화
- **GPT-4** - 박스 추천 의사결정

## �� 지원하는 박스 규격

우체국 택배 박스 표준 규격 (8종)

| 박스명 | 규격 (mm) | 가격 |
|--------|-----------|------|
| 1호 박스 | 220×190×90 | 700원 |
| 2호 박스 | 270×180×150 | 800원 |
| 3호 박스 | 350×250×100 | 900원 |
| 4호 박스 | 340×250×210 | 1,100원 |
| 5호 박스 | 410×310×280 | 1,300원 |
| 6호 박스 | 520×380×340 | 1,500원 |
| 7호 박스 | 520×480×400 | 1,700원 |
| 8호 박스 | 620×480×400 | 1,900원 |

## �� 디버깅

시스템에는 내장 디버깅 패널이 포함되어 있습니다:

1. 우하단 "�� DEBUG" 버튼 클릭
2. 각 서버별 헬스체크 실행
3. 패킹 알고리즘 테스트
4. AI 추천 시스템 검증

### 트러블슈팅

**카메라 연결 실패**
- 브라우저 카메라 권한 확인
- 다른 앱에서 카메라 사용 중인지 확인

**서버 연결 오류**  
- 모든 백엔드 서버가 실행 중인지 확인
- 포트 충돌 확인 (8000, 8001, 8002)

**ArUco 마커 인식 실패**
- 마커가 선명하게 인쇄되었는지 확인
- 조명이 충분한지 확인
- 마커가 카메라에 정면으로 보이는지 확인

## �� 성능 최적화

- **공간 효율성**: 평균 85% 이상
- **포장재 절약**: 일반 포장 대비 30% 절감
- **측정 정확도**: ArUco 마커 기반 ±2mm
- **실시간 처리**: Socket.IO 기반 즉시 결과


## �� 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다.

## �� 지원

문제가 발생하거나 질문이 있으시면 Issues를 통해 문의해주세요.

---

**�� AI가 만드는 스마트한 포장의 미래를 경험해보세요!**
