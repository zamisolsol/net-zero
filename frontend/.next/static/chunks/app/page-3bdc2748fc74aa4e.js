(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{949:(e,t,s)=>{"use strict";s.d(t,{default:()=>f});var l=s(5155),a=s(2115);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),i=e=>{let t=r(e);return t.charAt(0).toUpperCase()+t.slice(1)},c=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var m={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:x,...h}=e;return(0,a.createElement)("svg",{ref:t,...m,width:l,height:l,stroke:s,strokeWidth:r?24*Number(n)/Number(l):n,className:c("lucide",i),...!o&&!d(h)&&{"aria-hidden":"true"},...h},[...x.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(o)?o:[o]])}),x=(e,t)=>{let s=(0,a.forwardRef)((s,l)=>{let{className:r,...d}=s;return(0,a.createElement)(o,{ref:l,iconNode:t,className:c("lucide-".concat(n(i(e))),"lucide-".concat(e),r),...d})});return s.displayName=i(e),s},h=x("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),g=x("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),u=x("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),f=()=>{let[e,t]=(0,a.useState)("initial"),[n,r]=(0,a.useState)("disconnected"),[i,c]=(0,a.useState)(null),[d,m]=(0,a.useState)(""),[o,x]=(0,a.useState)(null),[f,p]=(0,a.useState)(null),[j,b]=(0,a.useState)(!1),[N,v]=(0,a.useState)(null),w=(0,a.useRef)(null),y=(0,a.useRef)(null),k=[{name:"1호 박스",dimensions:"220 \xd7 190 \xd7 90mm",maxW:220,maxL:190,maxH:90,volume:3762e3,price:"700원",id:1,image:"/images/001.jpg"},{name:"2호 박스",dimensions:"270 \xd7 180 \xd7 150mm",maxW:270,maxL:180,maxH:150,volume:729e4,price:"800원",id:2,image:"/images/002.jpg"},{name:"3호 박스",dimensions:"350 \xd7 250 \xd7 100mm",maxW:350,maxL:250,maxH:100,volume:875e4,price:"900원",id:3,image:"/images/003.jpg"},{name:"4호 박스",dimensions:"340 \xd7 250 \xd7 210mm",maxW:340,maxL:250,maxH:210,volume:1785e4,price:"1,100원",id:4,image:"/images/004.jpg"},{name:"5호 박스",dimensions:"410 \xd7 310 \xd7 280mm",maxW:410,maxL:310,maxH:280,volume:35588e3,price:"미정",id:5,image:"/images/005.jpg"},{name:"6호 박스",dimensions:"520 \xd7 380 \xd7 340mm",maxW:520,maxL:380,maxH:340,volume:0x4003800,price:"미정",id:6,image:"/images/006.jpg"},{name:"7호 박스",dimensions:"520 \xd7 480 \xd7 400mm",maxW:520,maxL:480,maxH:400,volume:9984e4,price:"미정",id:7,image:"/images/007.jpg"},{name:"8호 박스",dimensions:"620 \xd7 480 \xd7 400mm",maxW:620,maxL:480,maxH:400,volume:11904e4,price:"미정",id:8,image:"/images/008.jpg"}];(0,a.useEffect)(()=>(C(),()=>{w.current&&w.current.disconnect()}),[]);let C=async()=>{r("connecting");try{w.current=(0,(await s.e(298).then(s.bind(s,4298))).default)("http://127.0.0.1:8000",{transports:["websocket","polling"]}),w.current.on("connect",()=>{console.log("카메라 서버에 연결됨"),r("connected")}),w.current.on("disconnect",()=>{console.log("카메라 서버 연결 끊김"),r("disconnected"),c(null),b(!1)}),w.current.on("video_frame",e=>{e.image&&c("data:image/jpeg;base64,".concat(e.image)),void 0!==e.marker_detected&&b(e.marker_detected)}),w.current.on("measurement_result",e=>{m(e.dimensions),!e.dimensions||"마커를 먼저 인식시켜주세요."===e.dimensions||e.dimensions.includes("실패")||e.dimensions.includes("찾을 수 없습니다")||e.dimensions.includes("인식할 수 없습니다")?(t("initial"),"마커를 먼저 인식시켜주세요."!==e.dimensions&&""!==e.dimensions&&alert("측정에 실패했습니다: ".concat(e.dimensions))):F(e.dimensions)}),w.current.on("connect_error",e=>{console.error("연결 오류:",e),r("disconnected")})}catch(e){console.error("Socket.IO 로드 오류:",e),r("disconnected")}},F=e=>{let s=e.match(/W:\s*([\d.]+)mm/),l=e.match(/L:\s*([\d.]+)mm/),a=e.match(/H:\s*([\d.]+)mm/);if(s&&l){let e=parseFloat(s[1]),n=parseFloat(l[1]),r=a?parseFloat(a[1]):.6*Math.min(e,n);console.log("\uD83D\uDD0D 측정된 크기: ".concat(e,"mm x ").concat(n,"mm x ").concat(r,"mm")),x({width:e,length:n,height:r,volume:e*n*r});let i=null;for(let t=0;t<k.length;t++){let s=k[t],l=1.05*e<=s.maxW,a=1.05*n<=s.maxL,c=1.05*r<=s.maxH;if(l&&a&&c){i=s;break}}i?p(i):p({...k[k.length-1],name:"특수 포장 필요",dimensions:"물체가 표준 박스보다 큽니다"}),t("result")}},L=()=>{if(!o||!f)return null;let e=Math.floor(3*Math.random())+1,t=[{id:"main",width:o.width,length:o.length,height:o.height,color:"#3B82F6",name:"측정된 상품"}];for(let s=0;s<e;s++){let e=.3+.4*Math.random();t.push({id:"item".concat(s+1),width:o.width*e,length:o.length*e,height:o.height*e,color:["#EF4444","#10B981","#F59E0B","#8B5CF6"][s%4],name:"상품 ".concat(s+1)})}let s=f.maxW,l=f.maxL,a=f.maxH,n=[],r=10,i=10,c=10,d=0;return t.forEach((e,t)=>{r+e.width>s-10&&(r=10,i+=d+5,d=0),i+e.length>l-10&&(i=10,c+=d+5,d=0),n.push({...e,x:r,y:i,z:c}),r+=e.width+5,d=Math.max(d,e.height)}),{items:n,box:{width:s,length:l,height:a},efficiency:Math.min(95,65+20*Math.random())}},_=()=>{w.current&&"connected"===n&&j?(t("analyzing"),w.current.emit("measure")):j?alert("카메라가 연결되지 않았습니다."):alert("ArUco 마커를 먼저 인식시켜주세요.")},W=()=>{w.current&&w.current.emit("clear"),m(""),x(null),p(null)},A=()=>{t("packaging_loading"),setTimeout(()=>{v(L()),t("packaging_guide")},3e3)},D=()=>{W(),t("initial"),v(null)},H=()=>{if(!N)return null;let{items:e,box:t,efficiency:s}=N,a=300/Math.max(t.width,t.length);return(0,l.jsxs)("div",{className:"w-full max-w-lg mx-auto",children:[(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 text-center",children:"포장 배치도 (위에서 본 모습)"}),(0,l.jsx)("div",{className:"relative mx-auto",style:{width:t.width*a,height:t.length*a,border:"3px solid #374151",backgroundColor:"#F9FAFB",borderRadius:"8px"},children:e.map((t,s)=>(0,l.jsx)("div",{className:"absolute border-2 border-white rounded flex items-center justify-center text-white font-bold text-xs",style:{left:t.x*a,top:t.y*a,width:t.width*a,height:t.length*a,backgroundColor:t.color,zIndex:e.length-s},title:t.name,children:0===s?"주":s},t.id))})]}),(0,l.jsx)("div",{className:"text-center mb-4",children:(0,l.jsxs)("div",{className:"inline-flex items-center bg-green-100 px-4 py-2 rounded-full",children:[(0,l.jsx)(h,{className:"w-5 h-5 text-green-600 mr-2"}),(0,l.jsxs)("span",{className:"text-green-800 font-semibold",children:["공간 효율성: ",s.toFixed(1),"%"]})]})})]})};return(0,l.jsx)("div",{className:"min-h-screen bg-white",children:(0,l.jsx)("div",{className:"mx-auto w-full max-w-4xl px-4 py-12 md:py-20",children:(()=>{switch(e){case"initial":return(0,l.jsxs)("div",{className:"flex flex-col items-center px-6",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-green-800 mb-8",children:"상품촬영"}),(0,l.jsx)("p",{className:"text-green-700 mb-12 text-center text-lg",children:"상품을 중앙에 맞춰서 촬영해주세요."}),(0,l.jsxs)("div",{className:"relative w-full max-w-md mx-auto mb-12",children:[(0,l.jsx)("div",{className:"relative rounded-3xl overflow-hidden ".concat("connected"===n?j?"ring-4 ring-green-800":"ring-4 ring-red-500":"ring-4 ring-gray-300"),children:i&&"connected"===n?(0,l.jsx)("img",{ref:y,src:i,alt:"Camera feed",className:"w-full h-80 object-cover"}):(0,l.jsx)("div",{className:"w-full h-80 bg-gray-100 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(g,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,l.jsx)("p",{className:"text-gray-500 text-lg",children:"connecting"===n?"카메라 연결 중...":"카메라를 연결하는 중입니다"})]})})}),"connected"===n&&(0,l.jsx)("div",{className:"absolute top-4 left-4 px-3 py-1 rounded-full text-white text-sm font-medium ".concat(j?"bg-green-800":"bg-red-500"),children:j?"✓ 마커 인식됨":"마커를 찾는 중..."})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-4 w-full max-w-sm",children:[(0,l.jsx)("button",{onClick:_,disabled:!j||"connected"!==n,className:"px-12 py-4 rounded-full text-lg font-semibold transition-all duration-200 ".concat(j&&"connected"===n?"bg-green-800 text-white hover:bg-green-900 shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"분석하기"}),(0,l.jsx)("button",{onClick:D,className:"text-green-800 py-2 text-lg hover:text-green-900 transition-colors",children:"재분석하기"})]})]});case"analyzing":return(0,l.jsxs)("div",{className:"flex flex-col items-center px-6",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-green-800 mb-8",children:"상품촬영"}),(0,l.jsx)("p",{className:"text-green-700 mb-12 text-center text-xl",children:"상품을 분석중입니다."}),(0,l.jsx)("div",{className:"relative w-full max-w-md mx-auto mb-12",children:(0,l.jsxs)("div",{className:"relative rounded-3xl overflow-hidden",children:[(0,l.jsx)("img",{src:i||"https://images.unsplash.com/photo-1611930022073-b7a4ba5fcccd?w=400",alt:"Analyzing product",className:"w-full h-80 object-cover opacity-75"}),(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"bg-white/95 px-6 py-3 rounded-full flex items-center gap-3 shadow-lg",children:[(0,l.jsx)("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-green-800 rounded-full animate-spin"}),(0,l.jsx)("span",{className:"text-gray-700 font-medium text-lg",children:"분석중..."})]})})]})})]});case"result":return(0,l.jsxs)("div",{className:"flex flex-col items-center px-6",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("h2",{className:"text-green-800 text-3xl font-bold mb-3",children:"추천 사이즈"}),(0,l.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:(null==f?void 0:f.name)||"3호 박스"}),(0,l.jsx)("p",{className:"text-xl text-gray-600 mb-6",children:(null==f?void 0:f.dimensions)||"350 \xd7 250 \xd7 100mm"})]}),(0,l.jsx)("div",{className:"w-full max-w-xl mx-auto mb-6",children:(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsxs)("div",{className:"relative",children:[(null==f?void 0:f.image)?(0,l.jsx)("img",{src:f.image,alt:f.name,className:"w-96 h-72 object-contain rounded-lg",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,l.jsx)("div",{className:"w-96 h-72 bg-amber-200 rounded-lg shadow-lg flex items-center justify-center",style:{display:(null==f?void 0:f.image)?"none":"flex"},children:(0,l.jsx)("span",{className:"text-8xl font-bold text-gray-800",children:(null==f?void 0:f.id)||"3"})})]})})}),(0,l.jsxs)("div",{className:"space-y-2 mb-6 w-full max-w-xl",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center text-lg",children:[(0,l.jsx)("span",{className:"text-green-800 mr-3 text-4xl font-bold",children:"✓"}),(0,l.jsxs)("span",{className:"text-gray-700",children:["측정된 상품 규격: ",o?"약 ".concat(o.width.toFixed(0)," \xd7 ").concat(o.length.toFixed(0)," \xd7 ").concat(o.height.toFixed(0),"mm"):"약 160 \xd7 120 \xd7 100mm"]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-center text-lg",children:[(0,l.jsx)("span",{className:"text-green-800 mr-3 text-4xl font-bold",children:"✓"}),(0,l.jsx)("span",{className:"text-gray-700",children:"여유 공간 5% 이내, 부피 효율 최적화 완료"})]})]}),(0,l.jsxs)("p",{className:"text-green-800 text-center mb-8 px-4 text-lg leading-relaxed max-w-xl mx-auto font-medium",children:["불필요한 포장 없이 파손을 방지하며,",(0,l.jsx)("br",{}),"완충재와 탄소배출까지 줄일 수 있는 최적의 포장입니다."]}),(0,l.jsxs)("div",{className:"flex flex-col gap-6 w-full max-w-md",children:[(0,l.jsx)("button",{onClick:A,className:"bg-green-800 text-white px-12 py-5 rounded-full text-2xl font-semibold hover:bg-green-900 transition-colors shadow-lg",children:"이 포장 사용하기"}),(0,l.jsx)("button",{onClick:D,className:"text-green-800 py-5 text-2xl font-semibold hover:text-green-900 transition-colors shadow-md rounded-full border border-green-300 hover:border-green-400",children:"재분석하기"})]}),d&&(0,l.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-xl w-full max-w-xl",children:[(0,l.jsx)("h3",{className:"font-semibold text-gray-800 mb-2 text-lg",children:"측정 결과"}),(0,l.jsx)("p",{className:"text-gray-600",children:d})]})]});case"packaging_loading":return(0,l.jsxs)("div",{className:"flex flex-col items-center px-6 pt-16",children:[(0,l.jsxs)("div",{className:"text-center mb-12",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-green-800 mb-4",children:"포장 방법 분석 중"}),(0,l.jsx)("p",{className:"text-xl text-green-600",children:"최적의 포장 방법을 계산하고 있습니다..."})]}),(0,l.jsxs)("div",{className:"relative w-80 h-80 mb-12",children:[(0,l.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-gray-200"}),(0,l.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-green-600 animate-spin"}),(0,l.jsx)("div",{className:"absolute inset-12 bg-gradient-to-br from-green-100 to-green-200 rounded-full flex items-center justify-center",children:(0,l.jsx)(u,{className:"w-24 h-24 text-green-700 animate-pulse"})}),(0,l.jsx)("div",{className:"absolute inset-8 rounded-full border-2 border-transparent border-r-green-400 animate-spin",style:{animationDirection:"reverse",animationDuration:"3s"}})]}),(0,l.jsxs)("div",{className:"space-y-4 text-center",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-green-600 rounded-full animate-pulse"}),(0,l.jsx)("span",{className:"text-green-700 font-medium",children:"상품 크기 분석 완료"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-green-600 rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),(0,l.jsx)("span",{className:"text-green-700 font-medium",children:"박스 크기 최적화 중"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-gray-300 rounded-full animate-pulse",style:{animationDelay:"1s"}}),(0,l.jsx)("span",{className:"text-green-500",children:"포장 배치 계산 중"})]})]})]});case"packaging_guide":return(0,l.jsxs)("div",{className:"flex flex-col items-center px-6",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-green-800 mb-3",children:"스마트 포장 가이드"}),(0,l.jsx)("p",{className:"text-xl text-gray-600",children:"최적화된 포장 방법입니다"})]}),H(),(0,l.jsxs)("div",{className:"w-full max-w-lg mx-auto mb-8",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4 text-center",children:"포장 순서"}),(0,l.jsx)("div",{className:"space-y-3",children:null==N?void 0:N.items.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[(0,l.jsx)("div",{className:"w-6 h-6 rounded-full text-white text-sm font-bold flex items-center justify-center",style:{backgroundColor:e.color},children:0===t?"주":t}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("span",{className:"font-medium text-gray-800",children:e.name}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:[e.width.toFixed(0)," \xd7 ",e.length.toFixed(0)," \xd7 ",e.height.toFixed(0),"mm"]})]}),(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:[t+1,"단계"]})]},e.id))})]}),(0,l.jsxs)("div",{className:"w-full max-w-lg mx-auto mb-8 p-4 bg-green-50 rounded-xl",children:[(0,l.jsx)("h4",{className:"font-semibold text-green-800 mb-2",children:"\uD83D\uDCA1 포장 팁"}),(0,l.jsxs)("ul",{className:"text-sm text-green-700 space-y-1",children:[(0,l.jsx)("li",{children:"• 무거운 물품을 먼저 바닥에 배치하세요"}),(0,l.jsx)("li",{children:"• 빈 공간은 에어캡이나 신문지로 채워주세요"}),(0,l.jsx)("li",{children:"• 깨지기 쉬운 물품은 개별 포장 후 넣어주세요"})]})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-4 w-full max-w-md",children:[(0,l.jsx)("button",{onClick:()=>alert("포장이 완료되었습니다!"),className:"bg-green-800 text-white px-12 py-4 rounded-full text-xl font-semibold hover:bg-green-900 transition-colors shadow-lg",children:"포장 완료"}),(0,l.jsx)("button",{onClick:D,className:"text-green-800 py-3 text-lg font-semibold hover:text-green-900 transition-colors",children:"새로운 상품 분석하기"})]})]});default:return null}})()})})}},7806:(e,t,s)=>{Promise.resolve().then(s.bind(s,949))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(7806)),_N_E=e.O()}]);